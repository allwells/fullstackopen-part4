{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/service.js","components/Notification.js","App.js","index.js"],"names":["Filter","newFilter","filterChange","value","onChange","Persons","filterPerson","deletePerson","map","person","i","name","number","onClick","id","PersonForm","addPerson","newName","newNumber","nameChange","numberChange","onSubmit","type","URL","axios","get","then","res","data","personObject","post","put","delete","Notification","message","messageType","className","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","setMessage","msgType","setMsgType","useEffect","service","response","filter","toLowerCase","includes","event","target","preventDefault","obj","personsObject","find","window","confirm","console","log","catch","err","trim","error","setTimeout","status","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.651cc117.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ newFilter, filterChange }) => {\n  return (\n    <div>\n      filter: <input value={newFilter} onChange={filterChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Persons = ({ filterPerson, deletePerson }) => {\n  return (\n    <div>\n      {filterPerson.map((person, i) => (\n        <p key={i}>\n          {person.name}: {person.number}{\" \"}\n          <button onClick={() => deletePerson(person.id, person.name)}>\n            Delete\n          </button>\n        </p>\n      ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst PersonForm = ({\n  addPerson,\n  newName,\n  newNumber,\n  nameChange,\n  numberChange,\n}) => {\n  return (\n    <div>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input value={newName} onChange={nameChange} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={numberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonForm;\n","import axios from \"axios\";\n\nconst URL = \"/api/persons\";\n\nconst getAll = () => {\n  const req = axios.get(URL);\n  return req.then((res) => res.data);\n};\n\nconst create = (personObject) => {\n  const req = axios.post(URL, personObject);\n  return req.then((res) => res.data);\n};\n\nconst update = (id, personObject) => {\n  const req = axios.put(`${URL}/${id}`, personObject);\n  return req.then((res) => res.data);\n};\n\nconst remove = (id) => {\n  const req = axios.delete(`${URL}/${id}`);\n  return req.then((res) => res);\n};\n\n// eslint-disable-next-line\nexport default { getAll, create, update, remove };\n","import React from \"react\";\n\nconst Notification = ({ message, messageType }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className={messageType}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport service from \"./services/service\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [message, setMessage] = useState(null);\n  const [msgType, setMsgType] = useState(\"\");\n\n  useEffect(() => {\n    service.getAll().then((response) => {\n      setPersons(response);\n    });\n  }, []);\n\n  const nameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const numberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const filterChange = (event) => {\n    setNewFilter(event.target.value);\n  };\n\n  const filterPerson = persons\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(newFilter.toLowerCase())\n      )\n    : [];\n\n  const AddPerson = (event) => {\n    event.preventDefault();\n    const obj = {\n      name: newName,\n      number: newNumber,\n    };\n    const personsObject = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    );\n    if (personsObject) {\n      const confirm = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (confirm) {\n        service\n          .update(personsObject.id, obj)\n          .then((res) => {\n            console.log(res);\n            setPersons(\n              persons.map((person) => (person.id !== res.id ? person : res))\n            );\n            setMsgType(\"success\");\n            setMessage(`Changed ${personsObject.name}`);\n          })\n          .catch((err) => console.log(err));\n      }\n    } else {\n      service\n        .create({\n          name: newName.trim(),\n          number: newNumber.trim(),\n        })\n        .then((person) => {\n          setPersons([...persons, person]);\n          setMsgType(\"success\");\n          setMessage(`Added ${person.name}`);\n        })\n        .catch((err) => {\n          setMsgType(\"error\");\n          setMessage(`${err.response.data.error}`);\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n\n    setTimeout(() => {\n      setMessage(null);\n    }, 3000);\n  };\n\n  const deletePerson = (id, name) => {\n    window.confirm(`Delete ${name}?`)\n      ? service\n          .remove(id)\n          .then((response) => {\n            if (response.status === 204) {\n              setPersons(persons.filter((person) => person.id !== id));\n              setNewName(\"\");\n              setNewNumber(\"\");\n              setMsgType(\"success\");\n              setMessage(`Deleted ${name}`);\n              setTimeout(() => {\n                setMessage(null);\n              }, 3000);\n            }\n          })\n          .catch((error) => {\n            setMsgType(\"error\");\n            setMessage(\n              `Information of ${name} has already been removed from server!`\n            );\n            setTimeout(() => {\n              setMessage(null);\n            }, 3000);\n            setPersons(persons.filter((n) => n.id !== id));\n          })\n      : console.log();\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} messageType={msgType} />\n      <Filter newFilter={newFilter} filterChange={filterChange} />\n      <h3>Add a new</h3>\n      <PersonForm\n        addPerson={AddPerson}\n        newName={newName}\n        newNumber={newNumber}\n        nameChange={nameChange}\n        numberChange={numberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons filterPerson={filterPerson} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}